<!DOCTYPE html>
<html>
        <head>
                <title>Pengetesan Hardware, Software, Browser & API</title>
                <link rel="icon" type="image/x-icon" href="webphoto.jpg">
                <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
<style>
@import url('https://fonts.googleapis.com/css2?family=Urbanist:wght@500&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Bellota+Text:wght@700&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Saira+Condensed:wght@600&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Agdasima:wght@700&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Ubuntu+Mono:ital,wght@1,700&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Inconsolata:wght@300&display=swap');
        
.material-symbols-rounded {
  font-variation-settings:
  'FILL' 1,
  'wght' 700,
  'GRAD' 200,
  'opsz' 48
}
        #container {
                font-family: 'Urbanist', sans-serif;
        }
        #waktu {
                font-family: 'Urbanist', sans-serif;
        }
        button {
                font-family: 'Bellota Text', cursive;
                cursor:pointer; 
                border-radius: 800px; 
                background-color: #0fa3ff; 
                box-shadow: 0 12px 16px 0 rgba(0,0,0,0.24), 0 17px 50px 0 rgba(0,0,0,0.19); 
                padding: 10px 20px;
        }
        .recording {
      background-color: red;
    }
    .not-recording {
      background-color: green;
    }
        #textElement {
                font-family: 'Saira Condensed', sans-serif;
        }
        .offline-message {
         font-size: 24px;
        text-align: center;
        margin-top: 200px;
      }
      .content {
    flex: 1; /* Membuat konten utama mengisi sisa ruang */
    text-align: center;
    padding: 20px;
}

footer {
    text-align: center;
    background-color: #f0f0f0;
    padding: 10px;
  font-family: 'Agdasima', sans-serif;
}

.small-text {
    font-size: 12px; /* Mengatur ukuran teks menjadi lebih kecil */
    margin: 0; /* Menghapus margin bawaan */
  font-family: 'Agdasima', sans-serif;
      }
    .marquee-containerr {
width: 100%;
overflow: hidden;
}
@keyframes animation1 {
0% {
color: #FF0000;
}
1% {
color: #00FF00;
}
2% {
color: #0000FF;
}
3% {
color: #FFFF00;
}
4% {
color: #00FFFF;
}
5% {
color: #FF00FF;
}
6% {
color: #000000;
}
7% {
color: #FFFFFF;
}
8% {
color: #808080;
}
9% {
color: #000080;
}
10% {
color: #808000;
}
11% {
color: #008080;
}
12% {
color: #800000;
}
13% {
color: #800080;
}
14% {
color: #00FF00;
}
15% {
color: #FFA500
}
}
.color-changing {
animation: animation1 1s linear infinite;
}
marquee {
font-family: 'Ubuntu Mono', monospace;
}
        .h2 {
  font-family: 'Inconsolata', monospace;
        }
</style>
        </head>
        <body>
                 <div id="online-content">
                         <video id="videoElement" autoplay></video>
                         <br>
  <button onclick="getCamNMic()"> Tes Kamera+Mikrofon Mu!</button>
 <button onclick="getLocation()">Tes Lokasi Mu!</button>
                         <button id="recordButton" class="not-recording" onclick="toggleRecording()">Tes Layar Mu!(Gak Pakek WebRTC Karena Aku Noob :v)</button>
                         <button style="cursor:pointer; border-radius: 16px; background-color: #008CBA; box-shadow: 0 12px 16px 0 rgba(0,0,0,0.24), 0 17px 50px 0 rgba(0,0,0,0.19); position: absolute; top: 0px; right: 0px; display: inline-block; padding: 5px 10px; margin-right: 5px; z-index: 1;" onclick="refresh()" class="material-symbols-rounded">
refresh</button>
                         <a href="https://boring-websites.netlify.app" target="_parent">
    <button style="cursor:pointer; border-radius: 16px; background-color: cyan; box-shadow: 0 12px 16px 0 rgba(0,0,0,0.24), 0 17px 50px 0 rgba(0,0,0,0.19); position: absolute; top: 0px; right: 50px; display: inline-block; padding: 5px 10px; margin-right: 5px; z-index: 1;" class="material-symbols-rounded">arrow_back_ios</button>
                         </a>
                         <div id="container"></div>
    <div id="waktu"></div>
                         <br>
                         <button onclick="playiframe()">Tes &ltiframe&gt Di Browser Mu!</button>
                <br>
                <div id="textElement"></div>
                <br>
                <button onclick="requestNotificationPermission()">Tes Notifikasi Mu!(Service-Worker, Notification API & Push API)</button>
                 <button onclick="sendtoteleg()">Kirim Teks Ke Bot Telegram!(Sebelum Mengetes Nya, Kamu Haru Bergabung Grup Telegram Tester, <a href="https://t.me/gtelegramtester">Klik Disini Untuk Gabung!</a>)</button>
                 </div>

                <div id="offline-content" class="offline-message">
<div class="marquee-containerr">
<marquee behavior="scroll" directions="left" class="color-changing">
Kamu Offline, Periksa Internet Apakah Tersedia & Bisa Diakses...
</marquee>
</div>
    <div style="display: flex; align-items: center; flex-direction: column; text-align: center; font-size: 50px;" class="material-symbols-rounded">
wifi_off
</div>
    <div class="small-text">
    <h2 class="h2">Maaf, Kamu Offline <div class="material-symbols-rounded">sentiment_dissatisfied</div></h2>
    <footer>Jangan Di-Reload Saat Internet Udah Normal.</footer>
    <br>
    <footer>*Note : Ini Baru Halaman Asli Dari <bold>Boring-Websites</bold> Saat Kamu <bold>Offline</bold></footer></footer>
    </div>
                </div>
  <script>
          function sendtoteleg() {
        const botToken = '5906990752:AAHv8iFSmHu4MC4SM_IB3EZSiyTLxaZULvM';
        const chatId = '-1001983705713'; // Anda dapat menemukan ID obrolan dengan Bot Telegram lainnya atau grup
        const message = prompt("Masukkan Teks Untuk Dikirim Ke Telegram Bot : ");
if (message) {
        const url = `https://api.telegram.org/bot${botToken}/sendMessage`;
        const data = new URLSearchParams();
        data.append('chat_id', chatId);
        data.append('text', message);

        fetch(url, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/x-www-form-urlencoded',
          },
          body: data,
        })
          .then((response) => response.json())
          .then((data) => {
            alert("Berhasil Dikirim!", data)
                  console.log("successfully", data)
          })
          .catch((error) => {
                  alert("Gagal Dikirim!", error)
            console.error("unsuccessfully", error);
          });
      
      } else {
              alert("Masukkan Input Yang Valid!")
              console.error("invalid input")
                }
          }
          // Memeriksa status koneksi saat halaman dimuat
        window.addEventListener('load', function() {
            var offlineContent = document.getElementById('online-content');
            var offlineMessage = document.getElementById('offline-content');

            function handleConnectionChange(event) {
                var online = navigator.onLine;
                if (online) {
                    offlineContent.style.display = 'block';
                    offlineMessage.style.display = 'none';
                } else {
                    offlineContent.style.display = 'none';
                    offlineMessage.style.display = 'block';
                }
            }

            window.addEventListener('online', handleConnectionChange);
            window.addEventListener('offline', handleConnectionChange);

            handleConnectionChange();
        });
          if ('serviceWorker' in navigator) {
            window.addEventListener('load', function () {
                navigator.serviceWorker.register('service-worker.js').then(function (registration) {
                    alert("Service-Worker Telah Berhasil Didaftarkan : " + registration.scope);
                    console.log("service-worker registered successfully : " + registration.scope);
                }, function (err) {
                    console.error("service-worker registered failed : " + err);
                });
            });
        } else {
            alert("Browser Mu Tidak Mendukung Service Worker.");
            console.warn("Browser Doesn't Support [service-worker]");
        }

        function requestNotificationPermission() {
            if ('Notification' in window) {
                Notification.requestPermission()
                    .then(function (permission) {
                        if (permission === 'granted') {
                            alert("Notifikasi Diizinkan!");
                            console.log("Diizinkan.");
                            sendNotification();
                        } else {
                            alert("Notifikasi Ditolak!");
                            console.warn("Ditolak.");
                        }
                    });
            } else {
                alert("Browser Mu Tidak Mendukung API Notifikasi");
                console.warn("Browser Doesn't Support NOTIFICATION.API");
            }
        }

function sendNotification() {
  if ('serviceWorker' in navigator && 'PushManager' in window) {
    var notificationTitle = prompt("Masukkan Judul Notifikasi : ");
          
    var notificationDesc = prompt("Masukkan Teks Notifikasi : ");
         
    var button1Title = prompt("Masukkan Nama Untuk Tombol 1 : ");
          
    var button2Title = prompt("Masukkan Nama Untuk Tombol 2 : ");
          
    
if (notificationTitle && notificationDesc && button1Title && button2Title) {
                console.log('Judul Notifikasi Diubah Ke : ' + notificationTitle);
                console.log('Deskripsi Notifikasi Diubah Ke : ' + notificationDesc);
                console.log('Tombol-1 Notifikasi Diubah Ke : ' + button1Title);
                console.log('Tombol-2 Notifikasi Diubah Ke : ' + button2Title);
            
      navigator.serviceWorker.ready
        .then(function (registration) {
          const options = {
            body: notificationDesc,
            icon: 'notifications_FILL1_wght700_GRAD200_opsz48.png',
            actions: [
              { action: 'button-1', title: button1Title },
              { action: 'button-2', title: button2Title }
            ]
          };
          registration.showNotification(notificationTitle, options);
        })
        .catch(function (error) {
          alert("Terjadi Kesalahan Saat Mengirim Notifikasi : " + error);
          console.error(error);
        });
    } else {
      alert("Masukkan Input Yang Valid!");
    }
  } else {
    alert("Browser Mu Tidak Mendukung API Notifikasi Atau Service Worker.");
    console.error("Browser Doesn't Support NOTIFICATION.API Or [service-worker].");
  }
}

        navigator.serviceWorker.onmessage = event => {
            if (event.data.action === 'notification-data') {
                const teksElement = document.getElementById('textElement');
                teksElement.innerHTML = "Judul Notifikasi : " + `${event.data.title}` + "<br>Deskripsi Notifikasi : " + `${event.data.desc}` + "<br>Tombol Yang Diklik : " + `${event.data.buttonclicked}` + "<br>Ikon Notifikasi : <i class=" + '"material-symbols-rounded"' + ">notifications</i>";
            }
        };
function playiframe() {
        const link = prompt("Masukkan Link Website(Sembarang) : ", "https://yandex... :v");
        if (link.startsWith("https") || link.startsWith("http")) {
        const videoIframe = document.createElement('iframe');
    videoIframe.width = "560";
    videoIframe.height = "315";
    videoIframe.src = link;
    videoIframe.frameBorder = "0";
    videoIframe.allow = "autoplay; encrypted-media";
    videoIframe.allowFullscreen = true;

    document.body.appendChild(videoIframe);
  } else {
    alert("Link Website Yang Kamu Berikan Tidak Mengandung \"Https / Http\"!");
    console.error('Invalid Link.');
  }
}
          
          function refresh() {
                  location.reload();
          }
    let mediaStream;
    let mediaRecorder;
    let recordedChunks = [];
    let isRecording = false;

    function toggleRecording() {
      if (!isRecording) {
        startRecording();
      } else {
        stopRecording();
      }
    }

    async function startRecording() {
      try {
        if (isDeviceSupported()) {
          mediaStream = await navigator.mediaDevices.getDisplayMedia({ audio: true, video: true });

          mediaRecorder = new MediaRecorder(mediaStream);
          mediaRecorder.addEventListener('dataavailable', event => {
            if (event.data.size > 0) {
              recordedChunks.push(event.data);
            }
          });

          mediaRecorder.start();
          isRecording = true;
          updateButtonState();
        } else {
          alert("Karena OS[Operating System/Sistem Operasi] Mu iOS/Android, Jadi Pengetesan Layar Gak Mendukung Di Perangkat Ini.");
        }
      } catch (error) {
        console.error(error);
        alert("Gagal Menangkap Layar : \n" + error.message);
      }
    }

    function stopRecording() {
      if (mediaRecorder && mediaStream) {
        mediaRecorder.stop();

        const blob = new Blob(recordedChunks, { type: 'video/mp4' });
        const videoURL = URL.createObjectURL(blob);
        const videoPlayer = document.createElement('video');
        videoPlayer.src = videoURL;
        videoPlayer.controls = true;
        document.body.appendChild(videoPlayer);

        isRecording = false;
        updateButtonState();

        // Hapus video pemutar setelah perekaman selesai
        videoPlayer.addEventListener('ended', () => {
          videoPlayer.remove();
          URL.revokeObjectURL(videoURL);
        });
      }
    }

    function updateButtonState() {
      const recordButton = document.getElementById('recordButton');
      if (isRecording) {
        recordButton.innerText = 'Stop Tes Layar';
        recordButton.classList.remove('not-recording');
        recordButton.classList.add('recording');
      } else {
        recordButton.innerText = 'Tes Layar Mu!(WebRTC)';
        recordButton.classList.remove('recording');
        recordButton.classList.add('not-recording');
      }
    }

    function isDeviceSupported() {
      const userAgent = navigator.userAgent.toLowerCase();
      const isAndroid = userAgent.includes("android");
      const isiOS = /(iphone|ipad|ipod|macintosh)/.test(userAgent);
      
      return !(isAndroid || isiOS);
    }
            var cameraMicPressed = false;

                    function getCamNMic() {
                        if (cameraMicPressed) {
                            alert("Tombol Untuk Tes Kamera Cuman Ditekan Sekali!(Reload Website Untuk Menekannya Lagi)");
                            return;
                        }
                        
                        cameraMicPressed = true;

                        // Minta izin akses kamera
                        navigator.mediaDevices.getUserMedia({ video: true, audio: true })
                            .then(function (stream) {
                                var video = document.getElementById('videoElement');
                                video.srcObject = stream;
                                video.play();
                            })
                            .catch(function (error) {
                                alert('Gagal Mengakses Kamera : \n' + error);
                                console.error(error);
                                cameraMicPressed = false; // Reset ke false jika ada error
                            });
                    }

                    function getLocation() {
                        if (navigator.geolocation) {
                            navigator.geolocation.watchPosition(showPosition);
                        } else {
                            alert('Sepertinya Browser Mu Ini Gak Mendukung \"GeoLocation\".');
                            console.warn("GEOLOCATORERROR : Your browser doesnt support GEOLOCATION or your browser blocked this website to using LOCATION.ACCESS");
                        }
                    }

                    function showPosition(position) {
                        var container = document.getElementById('container');
                        var waktuElement = document.getElementById('waktu');
                        var waktu = getCurrentDateTime();
                        var waaaktu = "Tanggal & Waktu : " + waktu;

                        container.innerText = "\n Garis Lintang(Latitude) : " + position.coords.latitude + "\n Garis Bujur(Longitude) : " + position.coords.accuracy + "\n Akurasi Posisi(The accuracy of position) : " + position.coords.accuracy;
                        waktuElement.innerText = waaaktu;

                        setInterval(function() {
                            waktu = getCurrentDateTime();
                            waaaktu = "Tanggal & Waktu : " + waktu;
                            waktuElement.innerText = waaaktu;
                        }, 1000);
                    }

                    function getCurrentDateTime() {
                        var waktu = new Date();
                        var tahun = waktu.getFullYear();
                        var bulan = waktu.toLocaleDateString('id-ID', { month: 'long' });
                        var tanggal = waktu.getDate();
                        var hari = waktu.toLocaleDateString('id-ID', { weekday: 'long' });
                        var jam = waktu.getHours();
                        var menit = waktu.getMinutes();
                        var detik = waktu.getSeconds();

                        // Tambahkan angka 0 di depan jam, menit, dan detik jika nilainya kurang dari 10
                        jam = (jam < 10 ? "0" : "") + jam;
                        menit = (menit < 10 ? "0" : "") + menit;
                        detik = (detik < 10 ? "0" : "") + detik;

                        var waktuString = hari + ', ' + tanggal + ' ' + bulan + ' ' + tahun + ' ' + jam + ':' + menit + ':' + detik;

                        return waktuString;
                    }
                </script>
        </body>
</html>
