<!DOCTYPE html>
<html>
  <head>
    <title>Formulir Data</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta charset="UTF-8">
      <link rel="icon" type="image/x-icon" href="webphoto.png">
  </head>
  <body>
    <h1>Pengisian Formulir Dan Dikirim Lewat Telegram Bot</h1>
    <p>Sebelum Mencobanya Kalian Harus Gabung Grup Telegram <a href="https://t.me/gtelegramtester" target="_parent">Ini</a></p>
    <p>Silahkan Pilih Formulir Wajib Diisi Atau Opsional :</p>
    <br>
    <form>
      <label>Nama :</label>
      <br>
      <input id="nama" type="name" placeholder="Masukkan Nama" required></input>
      <br>
      <label>Umur :</label>
      <br>
      <input type="number" id="umur" placeholder="Umur" required></input>
      <br>
      <label>Alamat :</label>
      <br>
      <textarea id="lokasi" placeholder="Masukkan Alamat / Dapatkan Lokasi Langsung" required></textarea>
      <br>
      <button onclick="getLocation()">Dapatkan Lokasi</button>
      <br>
      <label>Tanggal Lahir :</label>
      <br>
      <input type="date" id="tgl_lahir" required></input>
      <br>
      <label>Email :</label>
      <br>
      <input id="email" type="email" placeholder="Masukkan Email" required></input>
      <br>
      <label>Kata Sandi :</label>
      <br>
      <input type="password" id="kata_sandi" placeholder="Masukkan Kata Sandi" required></input>
      <br>
      <input type="submit" onclick="sendText()"></input>
    
    </form>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    
    <script>
      const botToken = '5906990752:AAHv8iFSmHu4MC4SM_IB3EZSiyTLxaZULvM';
const chatId = '-1001983705713'; // Chat ID penerima pesan

async function telegramRequest(method, data) {
  try {
    const response = await axios.post(`https://api.telegram.org/bot${botToken}/${method}`, data);
    console.log(response.data);
  } catch (error) {
    alert("Kesalahan : \n", error);
    console.error(error);
  }
}

var nama = document.getElementById('nama');
var umur = document.getElementById('umur');
var alamat = document.getElementById('lokasi');
var tgl_lahir = document.getElementById('tgl_lahir')
var email = document.getElementById('email');
var kata_sandi = document.getElementById('kata_sandi');

var result = "\nNama : " + nama.value + "\nUmur : " + umur.value + " Tahun" + "\nLokasi : " + alamat.value + "\nEmail : " + email.value + "\nKata Sandi : " + kata_sandi.value;

function sendText() {
  const message = result;
  if (message) {
    telegramRequest('sendMessage', { chat_id: chatId, text: message });
    alert("Berhasil Mengirim");
  }
}

      function getLocation() {
                        if (navigator.geolocation) {
                            navigator.geolocation.watchPosition(showPosition,showError);
                        } else {
                            alert('Browser Mu Tidak Mendukung \"GeoLocation\"');
                            console.warn("[GeoLocation > WARNING]: Your browser doesn't support geolocation.");
                        }
      }
      function showPosition(position) {
        var x = document.getElementById('lokasi')
        x.innerText = position.coords.latitude + ", " + position.coords.longitude;
      }
      function showError(error) {
  switch(error.code) {
    case error.PERMISSION_DENIED:
      alert("Akses Lokasi Ditolak")
      console.error('[GeoLocation > DENIED]: Location permission denied by user.')
      break;
    case error.POSITION_UNAVAILABLE:
      alert("Lokasi Tidak Tersedia")
      console.error('[GeoLocation > UNAVAILABLE]: Location unavailable.')
      break;
    case error.TIMEOUT:
      alert("Waktu Habis Untuk Mendapatkan Lokasi Pengguna")
     console.error('[GeoLocation > TIMEOUT]: Request for get location from user is timeout.')
      break;
    case error.UNKNOWN_ERROR:
      alert("Ada Kesalahan Yang Tidak Diketahui")
      console.error('[GeoLocation > UNKNOWN_ERROR]: An occurred unknown error.')
      break;
  }
      }
    </script>
  </body>
</html>
